<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Stacking Plan Test</title>
  <style>
    body { font-family: sans-serif; padding: 2rem; }
    #output { white-space: pre-wrap; background: #f5f5f5; padding: 1rem; border-radius: 4px; }
  </style>
</head>
<body>
  <h1>ðŸ”Œ Stacking Plan Iframe Test</h1>
  <p>Waiting for data from parentâ€¦</p>
  <div id="output">No data received yet.</div>

  <script>
    // Listen for messages from the parent window
    window.addEventListener('message', event => {
      // (Optional) validate origin: if (event.origin !== 'https://your-retool-app-domain') return;
      const data = event.data;
      console.log('âœ… Received data from parent:', data);

      // Display the raw JSON in the page
      const outputEl = document.getElementById('output');
      outputEl.innerText = JSON.stringify(data, null, 2);

      // (Optional) send an acknowledgement back
      event.source.postMessage(
        { status: 'received', timestamp: Date.now() },
        event.origin
      );
    }, false);
  </script>
</body>
</html>
